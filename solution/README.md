# Олимпиада PROD - сервис по управлению рекламными объявлениями

## Ссылки:
* **[Readme Backend](backend/README.md)**
* **[Readme Streamlit-Дашборда](streamlit-dashboard/README.md)**
* **[Readme Telegram-Бота](telegram-bot/README.md)**

## Основные фичи (features) проекта
### Большая и удобная админская панель (streamlit-контейнер)
- Генерация данных
- Ручное заполнение своими данными (клиенты, кампании, ...)
- Красивое и подробное отображение графиков
- Управление модерацией (включение / выключение, добавление бан-слов)
- Список последних действий в админской панели

### Интеграция с Telegram-Ботом
- Телеграм бот в отдельном контейнере
- Привязка ID пользователей к их Client-ID
- Получение пользователями релевантной для них рекламы
- Наличие кнопок [следующая реклама] и [подробнее]

### Интеграция с LLM (openrouter.ai)
- Генерация рекламных текстов в админской панели (по эндпоинту)
- Широкий выбор моделей у провайдера

### Отдельный сервис для тестирования
- Добавление своих тестов
- Раздельный / одновременный запуск тестов 

### Наличие двух типов модерации
- Строгой - сервис возвращает 400 на некорректный текст
- Нестрогой - сервис заменяет бан-слова на звёздочки

### Функционал добавления и получения картинок
- Привязка картинок к определенному рекламному объявлению
- Получение картинок в виде ссылок или потока байтов



## Инструкция по запуску приложения
```bash
# Склонируйте репозиторий себе на компьютер
git clone git@gitlab.prodcontest.ru:2025-final-projects-back/Nizier193.git

# Перейдите в рабочую папку solution
cd ./Nizier193/solution
```
Перед запуском приложения необходимо скопировать `.env.example` в `.env` и проставить нужные переменные окружения.
Либо поменять переменные окружения в самом `docker-compose.yaml`

```bash
# Копируем .env.example в .env
cp .env.example .env
```

```bash
# Делаем сборку контейнера
docker compose up -d --build 
```
Процесс сборки занимает ~2 минуты.


## Общая структура проекта

```
project/
├── docker-compose.yaml
├── backend/
│   ├── app/
│   │   ├── core/               # Общие компоненты
│   │   │   ├── config.py      # Конфигурация приложения
│   │   │   ├── database.py    # Подключения к БД
│   │   │   ├── boto.py        # Подключения к AWS
│   │   │   └── cache.py       # Redis-кеширование
│   │   │
│   │   ├── modules/           # Основные модули
│   │   │   ├── clients/       # Группа Clients
│   │   │   │   ├── router.py
│   │   │   │   ├── service.py
│   │   │   │   ├── repository.py
│   │   │   │   ├── schemas.py # DTO (Pydantic models)
│   │   │   │   └── models.py  # SQLAlchemy models
│   │   │   │
│   │   │   ├── advertisers/   # Аналогичная структура
│   │   │   ├── campaigns/
│   │   │   ├── ads/
│   │   │   ├── statistics/
│   │   │   └── time/
│   │   │
│   │   ├── common/            # Общие зависимости
│   │   │   └── dependencies.py
│   │   │
│   │   ├── llm/               # Интеграция с LLM
│   │   │   └── integration.py
│   │   │
│   │   └── main.py            # Основной роутер
│   │
│   ├── Dockerfile
│   └── requirements.txt
│
├── streamlit-dashboard/
│   ├── app/
│   │   ├── src/
│   │   │   └── visualization.py
│   │   └── Dockerfile
│   └── requirements.txt
│
├── telegram-bot/
│   ├── app/
│   │   ├── src/
│   │   │   └── bot.py
│   │   └── Dockerfile
│   └── requirements.txt
│
├── testing-service/          # Сервис для тестирования
│
│
└── .env                      # Общие переменные окружения
```